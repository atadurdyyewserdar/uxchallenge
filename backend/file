┌──────────────────────────────────────────────────────────────────────────┐
│                            CLIENT (Frontend)                              │
│                    HTTP Requests with JWT Tokens                         │
└─────────────────────────────┬────────────────────────────────────────────┘
                              │
┌─────────────────────────────▼────────────────────────────────────────────┐
│                         SPRING BOOT API                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                    SECURITY FILTER CHAIN                            │ │
│  │  ┌──────────────┐    ┌──────────────┐    ┌────────────────────┐  │ │
│  │  │  JWTFilter   │ -> │ Authenticate │ -> │ Authorize Request  │  │ │
│  │  │ (Extract &   │    │ via          │    │ (Check Permissions)│  │ │
│  │  │  Validate)   │    │ UserDetails  │    │                    │  │ │
│  │  └──────────────┘    └──────────────┘    └────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│                              │                                            │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                    REST CONTROLLERS                                 │ │
│  │  ┌──────────────┐  ┌─────────────────┐  ┌──────────────────────┐ │ │
│  │  │AuthController│  │ContactController│  │  UserController      │ │ │
│  │  │ /auth/**     │  │ /contacts/**    │  │  /users/**           │ │ │
│  │  │              │  │                 │  │                      │ │ │
│  │  │- Register    │  │- Create Contact │  │- Get Profile         │ │ │
│  │  │- Login       │  │- Update Contact │  │- Update User         │ │ │
│  │  │- Refresh     │  │- Delete Contact │  │- Update Profile      │ │ │
│  │  │  Token       │  │- Get All        │  │                      │ │ │
│  │  │              │  │- Search         │  │                      │ │ │
│  │  │              │  │- Toggle Mute    │  │                      │ │ │
│  │  └──────┬───────┘  └────────┬────────┘  └──────────┬───────────┘ │ │
│  └─────────┼────────────────────┼───────────────────────┼─────────────┘ │
│            │                    │                       │                │
│  ┌─────────▼────────────────────▼───────────────────────▼─────────────┐ │
│  │                    SERVICE LAYER (Business Logic)                  │ │
│  │  ┌──────────────┐  ┌─────────────────┐  ┌──────────────────────┐ │ │
│  │  │ AuthService  │  │ ContactService  │  │  UserService         │ │ │
│  │  │ Impl         │  │ Impl            │  │  Impl                │ │ │
│  │  │              │  │                 │  │                      │ │ │
│  │  │- Password    │  │- Validation     │  │- User Management     │ │ │
│  │  │  Encryption  │  │- Authorization  │  │- Profile Updates     │ │ │
│  │  │- Token Gen   │  │- S3 Upload      │  │- Account Status      │ │ │
│  │  │- User Save   │  │- Contact CRUD   │  │                      │ │ │
│  │  └──────┬───────┘  └────────┬────────┘  └──────────┬───────────┘ │ │
│  └─────────┼────────────────────┼───────────────────────┼─────────────┘ │
│            │                    │                       │                │
│  ┌─────────▼────────────────────▼───────────────────────▼─────────────┐ │
│  │                UTILITY COMPONENTS                                   │ │
│  │  ┌──────────────┐  ┌─────────────────┐  ┌──────────────────────┐ │ │
│  │  │ JWTProvider  │  │ Input/Request   │  │ SecurityUtils        │ │ │
│  │  │              │  │ Validators      │  │                      │ │ │
│  │  │- Generate    │  │                 │  │- Get Current User    │ │ │
│  │  │- Validate    │  │- Field Check    │  │- Context Access      │ │ │
│  │  │- Extract     │  │- DTO Validation │  │                      │ │ │
│  │  └──────────────┘  └─────────────────┘  └──────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────┘ │
│            │                    │                                        │
│  ┌─────────▼────────────────────▼─────────────────────────────────────┐ │
│  │                REPOSITORY LAYER (Data Access)                       │ │
│  │  ┌──────────────┐  ┌─────────────────┐                            │ │
│  │  │UserRepository│  │ContactRepository│  Spring Data MongoDB       │ │
│  │  │              │  │                 │  (Custom Queries)           │ │
│  │  └──────┬───────┘  └────────┬────────┘                            │ │
│  └─────────┼────────────────────┼─────────────────────────────────────┘ │
└────────────┼────────────────────┼───────────────────────────────────────┘
             │                    │
┌────────────▼────────────────────▼───────────────────────────────────────┐
│                        MONGODB DATABASE                                  │
│  ┌──────────────────┐         ┌──────────────────────────────────────┐ │
│  │  users           │         │  contacts                            │ │
│  │  collection      │         │  collection                          │ │
│  │                  │         │                                      │ │
│  │  - id            │         │  - id                                │ │
│  │  - userName*     │         │  - ownerUserName                     │ │
│  │  - email*        │         │  - fullName                          │ │
│  │  - password      │         │  - phoneNumber                       │ │
│  │  - fullName      │         │  - email                             │ │
│  │  - roles         │         │  - pictureUrl (S3)                   │ │
│  │  - isActive      │         │  - isMuted                           │ │
│  │  - isLocked      │         │  - createdAt                         │ │
│  │  - createdAt     │         │  - lastModified                      │ │
│  │  - updatedAt     │         │                                      │ │
│  │  (* unique)      │         │                                      │ │
│  └──────────────────┘         └──────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────────────────┘
                                   │
                  ┌────────────────▼────────────────┐
                  │       AWS S3 BUCKET             │
                  │   (Profile Picture Storage)     │
                  │                                 │
                  │  - Contact profile images       │
                  │  - Generated URLs in DB         │
                  └─────────────────────────────────┘

                    EXCEPTION HANDLING (All Layers)
                    GlobalExceptionHandler → ErrorResponse